<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Caja Sorpresa Diaria</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    background: #fff;
    margin: 0;
    padding: 40px 20px;
  }

  .caja {
    width: 200px;
    cursor: pointer;
    transition: transform 0.3s ease;
  }

  .caja:hover { transform: scale(1.05); }

  .texto {
    margin-top: 12px;
    font-weight: bold;
    font-size: 16px;
  }

  #mensaje {
    margin-top: 18px;
    font-size: 14px;
    display: none;
    line-height: 1.5;
  }

  .titulo-fucsia {
    color: #d100a6;
    font-weight: bold;
  }

  .corazon-rojo {
    color: #e60000;
  }
  
  .regalo-rojo {
    color: #e60000;
    font-size: 22px;
    margin-right: 4px;
  }

  .boton {
    display: inline-block;
    margin-top: 14px;
    padding: 12px 22px;
    background: #FFD700;
    color: #000;
    font-weight: bold;
    text-decoration: none;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.15);
  }

  .icono-amarillo i {
    color: #FFD700;
    margin: 0 4px;
  }
  
  .destellos-amarillos {
    color: #FFD700;
    font-size: 18px;
    animation: brillar 1.6s infinite alternate;
}

@keyframes brillar {
  from {
    opacity: 0.4;
    transform: scale(1);
  }
  to {
    opacity: 1;
    transform: scale(1.2);
  }
} /* ‚Üê faltaba este cierre */

.boton-animado {
  animation: aparecerMagico 1.2s ease-out forwards;
  transform: scale(0.8);
  opacity: 0;
}

@keyframes aparecerMagico {
  0% {
    transform: scale(0.8);
    opacity: 0;
  }
  60% {
    transform: scale(1.05);
    opacity: 1;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }  
}
</style>
</head>

<body>

<img
  src="https://drive.google.com/thumbnail?id=1PhR-IY1uPqFdIgLwoY6ZnVHXXTvDX9i8&sz=w1000"
  id="caja"
  class="caja"
  alt="Caja sorpresa"
  onclick="abrirCaja()"
>

<div class="texto" id="texto-inicial">
 <span class="regalo-rojo">üêü</span>
  Toca el paisaje para recibir tu insignia de hoy
</div>

<div id="mensaje"></div>

<script>
const DIA_CAJA = 28; // üîÅ CAMBIA EN CADA CAJA (1,2,3...)
const hoy = new Date().toISOString().split("T")[0];
  
const caja = document.getElementById("caja");
const mensaje = document.getElementById("mensaje");
const textoInicial = document.getElementById("texto-inicial");

const CLAVE_CAJA = "caja_abierta_" + DIA_CAJA;
const CLAVE_PROGRESO = "ultimo_dia_abierto";

// üîí VERIFICAR SI ESTA CAJA EST√Å BLOQUEADA
const ultimoDia = parseInt(localStorage.getItem(CLAVE_PROGRESO)) || 0;
const cajaBloqueada = DIA_CAJA !== 1 && ultimoDia < DIA_CAJA - 1;  

// üîó SOLO BOT√ìN PARA ABRIR EN GOOGLE SLIDES
const enlaceHTML = `
<a
  href="https://drive.google.com/file/d/1eJ8NkInm7IIwzON6BlqeQrlfntyR9Fa_/view?usp=sharing"
  target="_blank"
  class="boton boton-animado"
>
üî∞ Abrir octava Insignia
</a>
`;

// AL CARGAR
if (localStorage.getItem(CLAVE_CAJA) === hoy) {
  caja.src = "https://drive.google.com/thumbnail?id=1xjhvZ9pM-q6BZmAu5mrENbRvir1-Y6mv&sz=w1000";
  textoInicial.style.display = "none";
  
  mensaje.innerHTML = `
    <span class="icono-amarillo"><i class="fa-solid fa-moon"></i></span>
    Ya abriste tu premio hoy.<br><br>
    ${enlaceHTML}
  `;
  mensaje.style.display = "block";
}

function abrirCaja() {
  textoInicial.style.display = "none";

  if (cajaBloqueada) return;

  const yaAbierta = localStorage.getItem(CLAVE_CAJA) === hoy;

  const contenidoHTML = yaAbierta
    ? `
      <span class="icono-amarillo"><i class="fa-solid fa-moon"></i></span>
      Ya abriste tu premio hoy.<br><br>
      ${enlaceHTML}
    `
    : `
      <span class="destellos-amarillos"> ‚ú®</span>Has desbloqueado el d√≠a ${DIA_CAJA}<span class="destellos-amarillos">‚ú®</span><br><br>

      <span class="titulo-fucsia">
       üèÜ GANA LA INSIGNIA "VISIONARIA"
      </span><br>
      <strong> üéØ Misi√≥n:Visualiza tu vida ideal 5 minutos.</strong>

      <span class="corazon-rojo">üíõ</span>
      <br><br>
      <strong>üéØ Completa la Misi√≥n.</strong><br>
       <em>Escribe  en tu CUADERNO de amor propio de notas y reflexiones. </em><br>
       
      <br>PASO A PASO‚ÄìAbrir la imagen
      Archivo ‚Üí Hacer una copia.
      Guarda esa copia en tu Google Drive. Abre tu tablero digital (Google Slides)
      En el tablero, presiona Insertar ‚Üí Imagen ‚Üí Drive.
      Selecciona la copia de tu carta y agr√©gala al tablero.
      Ajusta el tama√±o y col√≥cala.<br><br>

     ${enlaceHTML}
    `;

  mensaje.innerHTML = ""; // Limpia el contenido

  const tempDiv = document.createElement("div");
  tempDiv.innerHTML = contenidoHTML;
  mensaje.appendChild(tempDiv);
  
  // üî• Activar animaci√≥n en el bot√≥n
  const boton = tempDiv.querySelector(".boton");
  if (boton) {
    boton.classList.add("boton-animado");
  }


  if (!yaAbierta) {
    localStorage.setItem(CLAVE_CAJA, hoy);
    localStorage.setItem(CLAVE_PROGRESO, DIA_CAJA);
    caja.src = "https://drive.google.com/thumbnail?id=1xjhvZ9pM-q6BZmAu5mrENbRvir1-Y6mv&sz=w1000";
  }

  // ‚ú® Animaci√≥n m√°gica al mostrar el mensaje
  mensaje.style.opacity = 0;
  mensaje.style.display = "block";
  setTimeout(() => {
    mensaje.style.transition = "opacity 1s ease-in-out";
    mensaje.style.opacity = 1;
  }, 50);
}

</script>

</body>
</html>
